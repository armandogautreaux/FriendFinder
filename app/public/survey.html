<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Friends Finder</title>

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
    crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
    crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="css/style.css">

</head>

<body>
  <!--NAVBAR-->
  <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top mb-4">
    <div class="container">
      <button class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
      </button>
      <a href="#" class="navbar-brand">Survey Questions</a>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a href="/" class="nav-link">Home</a>
          </li>
          <li class="nav-item">
            <a href="/survey" class="nav-link">Survey</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!--SURVEY SECTION-->
  <div id="survey">
    <div class="container card col-lg-7 my-4 py-4 text-dark">
      <div class="card-body py-4 bg-primary">
        <div class="card-form">
          <form>
            <div class="form-group mb-4">
              <label for="exampleFormControlInput1"><h3 class="text-white">Name</h3></label>
              <input type="text" class="form-control form-control-lg" id="name" placeholder="Ex. John Doe">
            </div>
            <div class="form-group mb-4">
              <label for="exampleFormControlInput1"><h5 class="text-white">Link to Photo Image (Required)</h5></label>
              <input type="text" class="form-control form-control-lg" id="photo" placeholder="myprofile.facebook.com">
            </div>
            <div class="form-group my-5">
              <h6 class="text-dark">Question 1</h6>
              <label for="Question 1"><h5 class="text-white">Your mind is always buzzing with unexplored ideas and plans.</h5></label>
              <select class="form-control" id="question1">
                <option>Select an Option</option>
                <option value="1">1 (Strongly Disagre)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
            </div>
            <div class="form-group my-5">
              <h6 class="text-dark">Question 2</h6>
              <label for="Question 2"><h5 class="text-white">Generally speaking, you rely more on your experience than your
                  imagination.
                </h5></label>
              <select class="form-control" id="question2">
                <option>Select an Option</option>
                <option value="1">1 (Strongly Disagre)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
            </div>

            <div class="form-group my-5">
              <h6 class="text-dark">Question 3</h6>
              <label for="Question 3"><h5 class="text-white">You find it easy to stay relaxed and focused even when there
                  is some pressure.</h5></label>
              <select class="form-control" id="question3">
                <option>Select an Option</option>
                <option value="1">1 (Strongly Disagre)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
            </div>
            <div class="form-group my-5">
              <h6 class="text-dark">Question 4</h6>
              <label for="Question 4"><h5 class="text-white">You rarely do something just out of sheer curiosity.</h5>
              </label>
              <select class="form-control" id="question4">
                <option>Select an Option</option>
                <option value="1">1 (Strongly Disagre)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
            </div>
            <div class="form-group my-5">
              <h6 class="text-dark">Question 5</h6>
              <label for="Question 5"><h5 class="text-white">People can rarely upset you.</h5>
              </label>
              <select class="form-control" id="question5">
                <option>Select an Option</option>
                <option value="1">1 (Strongly Disagre)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
            </div>
            <div class="form-group my-5">
              <h6 class="text-dark">Question 6</h6>
              <label for="Question 6"><h5 class="text-white">It is often difficult for you to relate to other people’s feelings.</h5>
              </label>
              <select class="form-control" id="question6">
                <option>Select an Option</option>
                <option value="1">1 (Strongly Disagre)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
            </div>
            <div class="form-group my-5">
              <h6 class="text-dark">Question 7</h6>
              <label for="Question 7"><h5 class="text-white">In a discussion, truth should be more important than people’s
                  sensitivities.
                </h5>

              </label>
              <select class="form-control" id="question7">
                <option>Select an Option</option>
                <option value="1">1 (Strongly Disagre)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
            </div>
            <div class="form-group my-5">
              <h6 class="text-dark">Question 8</h6>
              <label for="Question 8"><h5 class="text-white">You rarely get carried away by fantasies and ideas.</h5>
              </label>
              <select class="form-control" id="question8">
                <option>Select an Option</option>
                <option value="1">1 (Strongly Disagre)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
            </div>
            <div class="form-group my-5">
              <h6 class="text-dark">Question 9</h6>
              <label for="Question 9"><h5 class="text-white">You think that everyone’s views should be respected regardless
                  of whether they are supported by facts or not.</h5>
              </label>
              <select class="form-control" id="question9">
                <option>Select an Option</option>
                <option value="1">1 (Strongly Disagre)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
            </div>

            <div class="form-group my-5">
              <h6 class="text-dark">Question 10</h6>
              <label for="Question 10"><h5 class="text-white">You feel more energetic after spending time with a group of
                  people.
                </h5>
              </label>
              <select class="form-control" id="question10">
                <option>Select an Option</option>
                <option value="1">1 (Strongly Disagre)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
            </div>
            <button class="btn btn-warning btn-block py-2 my-2 submit" type="button">Submit</button>
          </form>
        </div>
      </div>

      <!--MODAL-->
      <div class="modal" id="myModal">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">WE FOUND YOUR BEST MATCH</h5>
              <button class="close" data-dismiss="modal">&times;</button>
            </div>
            <div modal="modal-body">
              <h1 id="modalBody"></h1>
            </div>
            <div class="modal-footer">
              <button class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <footer class="footer">
    <div class="container text-center py-4">
      <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/armandogautreaux/FriendFinder">GitHub
          Repo
        </a></p>
    </div>
  </footer>





  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
  <script type="text/javascript">

    //Through the next logic we send to the back end our incomming data

    //1. All our data gets trigger when the next click event happens
    $(".submit").on("click", function (event) {

      //2. We start by prevening any browser reload through the next method
      event.preventDefault();

      //2.1 We validate the user input and send it to the backend if there is enough content
      if ($("#name").val() == '') {
        alert('Please enter your Full Name');
        $('#name').focus(); //The focus function will move the cursor to "name" field
      } else if ($("#photo").val() == '') {
        alert('Please enter your Photolink');
        $('#photo').focus(); //The focus function will move the cursor to "photo" field
      }

      //3. We collect our incomming data and storage in the next object
      else {
        var newFriend = {
          name: $("#name").val().trim(),
          photo: $("#photo").val().trim(),
          scores: [$("#question1").val(), $("#question2").val(), $("#question3").val(), $("#question4").val(), $("#question5").val(), $("#question6").val(), $("#question7").val(), $("#question8").val(), $("#question9").val(), $("#question10").val()]
        };


        //4. We call our post (ajax) method to send our object to the back-end
        $.post('/api/friends', newFriend).done(function (data) {

          //After our back-end receive the object and proccess its logic, send back the data to display to the user
          if (data) {

            //If our logic was correct, the next info is gonna be displayed to the user through the hidden Boostrap modal
            $("#modalBody").text("Name: " + data.name)
            $("#myModal").modal("toggle");
          }

          //After our function display the info to the user we clear the inputs
          $("#name").val(''), $("#photo").val(''), $("#question1").val(''), $("#question2").val(''), $("#question3").val(''), $("#question4").val(''), $("#question5").val(''), $("#question6").val(''), $("#question7").val(''), $("#question8").val(''), $("#question9").val(''), $("#question10").val('')
        });
      }

    });
  </script>
</body>

</html>